(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__k5X_J",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__1AZ8X"}},11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2WgJe",Modal:"Modal_Modal__qr5QB"}},13:function(e,t,a){e.exports={container:"Container_container__1PROH"}},14:function(e,t,a){e.exports={message:"NotFound_message__3WvZ_"}},16:function(e,t,a){e.exports={Loader:"Loader_Loader__25bnN"}},17:function(e,t,a){e.exports={Button:"Button_Button__nSDqX"}},23:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),s=a.n(r),c=(a(23),a(3)),i=a(4),l=a(6),u=a(5),d=a(18),m=a(13),h=a.n(m),g=a(1);var j=function(e){var t=e.children;return Object(g.jsx)("div",{className:h.a.container,children:t})},p=a(2),f=a.n(p),b=a(14),y=a.n(b);function O(e){var t=e.message;return Object(g.jsxs)("p",{className:y.a.message,children:[" Search images ",t," not found"]})}O.protoType={message:f.a.string};var v=O,x=a(12),I=a(8),_=a.n(I),w=a(10),k=a.n(w),M=a(11),C=a.n(M),L=document.querySelector("#modal-root"),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onKeyDown=function(t){"Escape"===t.key&&e.props.onCloseModal(t)},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onCloseModal()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){return Object(r.createPortal)(Object(g.jsx)("div",{onClick:this.props.onCloseModal,className:C.a.Overlay,children:Object(g.jsx)("div",{className:C.a.Modal,children:Object(g.jsx)("img",{src:this.props.modalImg,alt:this.props.modalAlt})})}),L)}}]),a}(n.Component),G=S,A=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={showModal:!1,modalImg:"",modalAlt:""},e.onOpenModal=function(t){e.setState({modalImg:t.target.dataset.source,showModal:!0,modalAlt:t.target.attributes.alt.textContent})},e.onCloseModal=function(t){"IMG"!==t.target.nodeName&&e.setState({showModal:!1,modalImg:"",modalAlt:""})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.images,a=this.state,n=a.showModal,o=a.modalImg,r=a.modalAlt;return Object(g.jsxs)(g.Fragment,{children:[t.map((function(t){var a=t.id,n=t.webformatURL,o=t.tags,r=t.largeImageURL;return Object(g.jsx)("li",{className:k.a.ImageGalleryItem,children:Object(g.jsx)("img",{onClick:e.onOpenModal,className:k.a.ImageGalleryItemImage,src:n,alt:o,"data-source":r})},a)})),n&&Object(g.jsx)(G,{onCloseModal:this.onCloseModal,modalImg:o,modalAlt:r})]})}}]),a}(o.a.Component),N=A,F=a(15),Q=a.n(F),B=a(16),P=a.n(B),D=function(){return Object(g.jsx)("div",{className:P.a.Loader,children:Object(g.jsx)(Q.a,{type:"Circles",color:"#00BFFF",height:80,width:80})})},q=a(17),T=a.n(q),E=function(e){var t=e.onLoadMore;return Object(g.jsx)("button",{onClick:t,className:T.a.Button,type:"button",children:"Load more"})},U=new(function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,[{key:"fetchApi",value:function(){var e="".concat("https://pixabay.com/api/","?q=").concat(this.searchQuery,"&page=").concat(this.page,"&key=").concat("22870491-0414a720e7578a2aeb94b7ded","&image_type=photo&orientation=horizontal&per_page=12");return fetch(e).then((function(e){if(e.ok)return e.json()})).then((function(e){return e}))}},{key:"incrementPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}]),e}()),J="idle",K="pending",R=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={images:[],error:null,status:J,page:1},e.onLoadMore=function(){e.setState({status:"pending"}),U.incrementPage(),U.fetchApi().then((function(t){return e.setState((function(e){return{images:[].concat(Object(x.a)(e.images),Object(x.a)(t.hits)),status:"resolved"}}))})).finally((function(){setTimeout((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),200)}))},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=e.searchQuery,o=this.props.searchQuery,r=this.state.page;n!==o&&(this.setState({status:K}),U.query=o,U.resetPage(),U.fetchApi(r).then((function(e){return 0!==e.hits.length?a.setState({images:e.hits,status:"resolved"}):a.setState({images:e.hits,status:"rejected"})})))}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.status,n=this.props.searchQuery;return"idle"===a?Object(g.jsx)("div",{className:_.a.idle,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f."}):"pending"===a?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("ul",{className:_.a.ImageGallery,id:"imagesList",children:Object(g.jsx)(N,{images:t})}),Object(g.jsx)(D,{})]}):"rejected"===a?Object(g.jsx)(v,{message:n}):"resolved"===a?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("ul",{className:_.a.ImageGallery,id:"imagesList",children:Object(g.jsx)(N,{images:t})}),Object(g.jsx)(E,{onLoadMore:this.onLoadMore})]}):void 0}}]),a}(n.Component),W=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={searchQuery:""},e.handleFormSubmit=function(t){e.setState({searchQuery:t})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(g.jsxs)(j,{children:[Object(g.jsx)(v,{onSubmit:this.handleFormSubmit}),Object(g.jsx)(R,{searchQuery:this.state.searchQuery}),Object(g.jsx)(d.a,{autoClose:3e3})]})}}]),a}(n.Component),X=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,46)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),o(e),r(e),s(e)}))};s.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(W,{})}),document.getElementById("root")),X()},8:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3kU_2",idle:"ImageGallery_idle__o80oe"}}},[[45,1,2]]]);
//# sourceMappingURL=main.5a2bb8b8.chunk.js.map